<?xml version="1.0"?>

<mamico>
  <!-- "write-every-macroscopic-timestep" means CFD time step /-->
  <macroscopic-cell-configuration
    cell-size="2.5 ; 2.5 ; 2.5"
    linked-cells-per-macroscopic-cell="1 ; 1 ; 1"
    write-every-microscopic-timestep="0"
    microscopic-filename="MacroscopicCell_micro"
    write-every-macroscopic-timestep="0"
    macroscopic-filename="MacroscopicCell_macro"
  />
  <!--<particle-insertion type="usher" maximum-number-of-iterations="100" maximum-number-of-restarts="500" insert-every-timestep="10" tolerance="0.5" />-->
  <particle-insertion type="none" />
  <momentum-insertion type="nie-velocity-imposition" outermost-overlap-layer="2" innermost-overlap-layer="3" />
  <transfer-strategy type="nie-transfer" mass-flux-west="yes" mass-flux-east="yes" mass-flux-north="yes" mass-flux-south="yes" mass-flux-bottom="yes" mass-flux-top="yes" />
  <boundary-force type="zhou-boundary-force" west="no" east="no" north="no" south="no" bottom="no" top="no" density="0.81" temperature="1.1" />
  <parallel-topology type="xyz" />
    <!-- the thermostat option defines, where to apply the above defined temperature within the md region, options:
    -all: the thermostat will be applied in every cell of the md region
    -outerLayers: the thermostat will be applied in the value defined in "number-layers" (integer value) number of layers, starting with the most outer layer
    -onlyOutestLayer: the thermostat will be applied only in the outest cell layer of the md region
    -nowhere: the thermostat will be applied nowehere within the md region /-->
  <thermostat type='outerLayers' number-layers='1' />
</mamico>

<molecular-dynamics>

  <molecule-configuration
    mass="1.0"
    temperature="1.27"
    sigma="1.0"
    epsilon="1.0"
    mean-velocity="0.0 ; 0.0 ; 0.0"
  ></molecule-configuration>

  <mpi-configuration number-of-processes="1 ; 1 ; 1" ></mpi-configuration>

  <simulation-configuration
    dt="0.005"
    number-of-timesteps="50"
    reorganise-memory-every-timestep="20"
    compute-macroscopic-quantities-every-timestep="0"
    fix-seed="no"
   ></simulation-configuration>

  <vtk-configuration filename="Molecules" write-every-timestep="0"></vtk-configuration>

  <checkpoint-configuration filename="CheckpointSimpleMD" write-every-timestep="0"></checkpoint-configuration>

  <domain-configuration

    molecules-per-direction="56; 56; 56"
    domain-size="60.0 ; 60.0 ; 60.0"
    domain-offset="0.0 ; 0.0 ; 0.0"
    cutoff-radius="2.5"
    linked-cell-size="2.5 ; 2.5 ; 2.5"
    k_B="1.0"
    block-size="100"

    bottom-south-west="periodic"   bottom-south="periodic" bottom-south-east="periodic"
    bottom-west="periodic"       bottom="periodic"       bottom-east="periodic"
    bottom-north-west="periodic" bottom-north="periodic" bottom-north-east="periodic"

    south-west="periodic"        south="periodic"        south-east="periodic"
    west="periodic"                                          east="periodic"
    north-west="periodic"        north="periodic"        north-east="periodic"

    top-south-west="periodic"    top-south="periodic"    top-south-east="periodic"
    top-west="periodic"          top="periodic"          top-east="periodic"
    top-north-west="periodic"    top-north="periodic"    top-north-east="periodic"
  > </domain-configuration>
</molecular-dynamics>

<filter-pipeline>

    <per-instance output="md">
      <test-md-domain-values input= "mdAndOuter" filtered-values="velocity">
        <asymmetrical-write-to-file-junctor
          wtf1-location="kvs_md_domain_init_24000_SW.csv"
          wtf2-location="kvs_combined_domain_init_24000_SW.csv"
        />
      </test-md-domain-values>
    </per-instance>

    <post-multi-instance output="md">
    </post-multi-instance>
</filter-pipeline>
